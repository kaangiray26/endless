const extractor=()=>({get_posts:async function(page=1,request=null,args=null){return await fetch(`https://news.ycombinator.com/news?p=${page}`).then((res=>res.text())).then((str=>(new window.DOMParser).parseFromString(str,"text/html"))).then((dom=>[...dom.querySelectorAll(".athing")])).then((posts=>posts.map((post=>({title:post.querySelector(".titleline>a").innerText,author:post.nextSibling.querySelector(".hnuser")?post.nextSibling.querySelector(".hnuser").innerText:null,url:post.querySelector(".titleline>a").href,id:post.id,dt:post.nextSibling.querySelector(".age").title,image:"/favicon.svg",page:"/discover/hacker-news/"+post.id}))))).catch((err=>[]))},get_post:async function(id,request=null,args=null){return await fetch(`https://news.ycombinator.com/item?id=${id}`).then((res=>res.text())).then((str=>(new window.DOMParser).parseFromString(str,"text/html"))).then((dom=>({title:dom.querySelector(".titleline > a").innerText,author:dom.querySelector(".hnuser").innerText,url:dom.querySelector(".titleline > a").href,id:id,dt:dom.querySelector(".age").title,image:"/favicon.svg",page:"/discover/hacker-news/"+id})))}});